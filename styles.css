:root{
  --bg:#0d0f12;
  --panel:#151922;
  --muted:#8b94a7;
  --text:#e9edf4;
  --accent:#48d06d;
  --accent-ghost:rgba(72,208,109,0.15);
  --danger:#ff6b6b;
  --radius:14px;
  --gap:12px;
  --shadow:0 8px 24px rgba(0,0,0,.35);
  --mono: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
  --font: system-ui, -apple-system, Segoe UI, Roboto, Inter, Helvetica, Arial, sans-serif;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:var(--font);
  color:var(--text);
  background:linear-gradient(180deg,#0c0f15 0%,#0b0e13 100%);
  display:flex;
  flex-direction:column;
  min-height:100%;
  padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
}

.app-header,
main,
.app-footer{
  width:min(960px, 100%);
  margin:0 auto;
}

.app-header{
  position:sticky; top:0; z-index:3;
  background:rgba(13,15,18,.8);
  backdrop-filter: blur(8px);
  border-bottom:1px solid #1f2530;
  padding:clamp(12px, 4vw, 20px);
}
.app-header h1{margin:0 0 6px 0; font-size:1.25rem; letter-spacing: .5px}

.day-controls{
  display:flex; gap:8px; align-items:center; justify-content:center;
  margin-bottom:10px;
  flex-wrap:wrap;
}
.day-controls input[type="date"]{
  background:var(--panel); color:var(--text);
  border:1px solid #2a3240; border-radius:10px; padding:8px 10px; min-width: 180px;
  flex:1 1 160px;
}
.day-controls button{
  background:var(--panel); color:var(--text);
  border:1px solid #2a3240; border-radius:10px; padding:8px 10px;
  flex:0 0 auto;
}

.tabs{display:flex; gap:8px; flex-wrap:wrap}
.tab{
  flex:1; padding:10px; border-radius:999px; border:1px solid #2a3240;
  background:var(--panel); color:var(--muted); font-weight:600;
}
.tab.active{color:var(--text); border-color:var(--accent); box-shadow:inset 0 0 0 1px var(--accent-ghost)}

main{flex:1 1 auto; padding:clamp(14px, 5vw, 28px)}
.tab-panel.hidden{display:none}

.card{
  background:var(--panel); border:1px solid #252c3a; border-radius:var(--radius);
  padding:clamp(12px, 4vw, 20px); box-shadow:var(--shadow);
}

.grid{display:grid; gap:var(--gap)}
.field{display:flex; flex-direction:column; gap:6px}
.field.inline{display:flex; flex-direction:column; width:100%}
.field span{font-size:.85rem; color:var(--muted)}
.field input, .field select, .field textarea{
  background:#0f131a; color:var(--text); border:1px solid #2a3240; border-radius:10px; padding:10px;
}

.fieldset{
  border:1px solid #2a3240; border-radius:12px; padding:10px; background:#0f131a;
}
.fieldset .legend{display:block; color:var(--muted); margin-bottom:6px; font-size:.9rem}
.row{display:flex; align-items:center; gap:8px}
.row.indent{margin-left:28px; margin-top:6px}
.row.inline{gap:12px}

.actions{display:flex; gap:8px; margin-top:10px}
button{
  cursor:pointer;
  background:var(--accent); color:#08150c; border:none; border-radius:12px; padding:10px 14px; font-weight:700;
  box-shadow:0 4px 12px rgba(72,208,109,.25);
}
button.ghost{
  background:transparent; color:var(--text);
  border:1px solid #2a3240; box-shadow:none;
}
button.primary{background:var(--accent)}
button.danger{background:var(--danger); color:#1d0000}
button.small{padding:6px 10px; font-size:.85rem; border-radius:10px}
button.link{background:transparent; color:var(--accent); border:none; padding:0}

.app-footer{padding:16px; text-align:center; color:var(--muted)}

.day-summary{display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:10px; flex-wrap:wrap}
#dayTitle{margin:0; font-size:1.05rem}
.copy-day{display:flex; align-items:center; gap:8px; flex-wrap:wrap}
.copy-box{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
.copy-box input[type="date"]{flex:1 1 160px; min-width:0}
.copy-box.hidden{display:none}

.exercise-list{list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:10px}
.exercise{padding:clamp(12px, 4vw, 20px); border:1px solid #2a3240; border-radius:14px; background:linear-gradient(180deg,#121722 0,#0f131d 100%)}
.exercise .title{display:flex; align-items:center; justify-content:space-between; gap:8px}
.exercise .meta{color:var(--muted); font-size:.9rem; margin:6px 0}
.exercise .meta code{font-family:var(--mono); background:#0b0f16; padding:2px 6px; border-radius:8px; border:1px solid #1e2633}

.exercise .controls{display:flex; gap:6px; flex-wrap:wrap}
.exercise .edit-box{margin-top:10px; border-top:1px dashed #2a3240; padding-top:10px}
.exercise .sets-grid{display:grid; grid-template-columns:repeat(auto-fill,minmax(80px,1fr)); gap:8px}
.exercise .sets-grid input{width:100%}

.empty-hint{
  opacity:.8; text-align:center; color:var(--muted);
  border:1px dashed #2a3240; border-radius:12px; padding:16px; margin-top:12px;
}

.mini-cal{
  position:fixed; right:10px; bottom:10px; z-index:5;
  background:var(--panel); border:1px solid #2a3240; border-radius:16px; box-shadow:var(--shadow);
  width: 290px; max-width: 90vw; padding:10px;
}
.mini-cal-header{display:flex; align-items:center; justify-content:space-between; margin-bottom:6px}
.mini-cal-header #mcLabel{font-weight:700}
.mini-cal-grid{
  display:grid; grid-template-columns: repeat(7, 1fr); gap:6px; align-items:center;
}
.mini-cal-grid .dow{
  text-align:center; color:var(--muted); font-size:.75rem;
}
.mini-cal-grid button.day{
  aspect-ratio:1/1;
  background:#0f131a; color:var(--text); border:1px solid #2a3240; border-radius:10px; padding:0;
  font-weight:600;
}
.mini-cal-grid button.day.today{outline:2px solid var(--accent)}
.mini-cal-grid button.day.has{box-shadow: inset 0 0 0 2px var(--accent-ghost)}
.mini-cal-grid button.day.selected{background:var(--accent); color:#062410}

@media (max-width: 640px){
  .mini-cal{display:none}
  .app-header,
  main,
  .app-footer{width:100%;}
  .tabs{width:100%;}
  .tab{flex:1 1 calc(50% - 4px); text-align:center}
  .day-summary{align-items:flex-start;}
  .day-summary h2{font-size:1rem}
  .copy-day{width:100%; flex-wrap:wrap; justify-content:flex-start}
  .copy-day button{flex:1 1 120px}
  .exercise .title{flex-direction:column; align-items:flex-start}
  .exercise .controls{width:100%}
  .fieldset{padding:12px}
  .row{flex-wrap:wrap; align-items:flex-start}
}

@media (min-width: 800px){
  main{max-width:900px; margin:0 auto}
}
